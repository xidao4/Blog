# 个人博客系统软件体系结构文档

## 文档修改历史

| 修改人员 |   日期    | 修改原因 |   版本号   |
| :------: | :-------: | :------: | :--------: |
|   金逸   | 2020.6.18 | 最初草稿 | v1.0.0草稿 |

## 目录

[TOC]

### 1.1 编制目的

本报告详细完成对个人博客系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户编写，是了解系统的导航。

### 1.2 词汇表

|   词汇名称   |         词汇含义         |                    备注                     |
| :----------: | :----------------------: | :-----------------------------------------: |
| 个人博客系统 | 当前开发中的个人博客系统 | @Data注解表示为该类添加构造器和Set、Get方法 |



### 1.3 参考资料

1. IEEE标准
2. 本系统需求规格说明文档
3. 软件工程与计算（卷二）软件开发的技术基础

## 2. 产品概述



## 3. 逻辑视图

个人系统中，选择了MVC体系结构风格，但因为Web开发的特殊性，以及选用的开发技术（Spring Boot框架）在配置上的简化，使得在进行逻辑设计时，只需要将系统分为3层（展示层、业务逻辑层、数据层），即可示意整个高层抽象。展示层包含GUI页面的实现和用户行为的响应，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。体系结构的逻辑视角和逻辑设计方案如图1和图2所示。



## 4. 组合视图

### 4.1 开发包图

酒店管理系统的最终开发包设计如表1所示。

<div style="text-align:center;"><strong>表1 酒店管理系统的最终开发包设计





|      |      |
| :--- | ---- |
|      |      |

​	由于Web开发的特殊性，个人博客系统的用户端不需要进行开发，只需用户自行安装浏览器即可，故略过。服务器端开发包图如图3所示。



### 4.2 运行时进程

个人博客系统中，会有多个客户端进程和一个服务器端进程。结合部署图，客户端进程在客户端机器上运行，服务器端进程在服务器端机器上运行。进程图如图4所示。




### 4.3 物理部署

个人博客系统中，客户端构件是放在客户端机器上的，服务器端构件是放在服务器端机器上的。在客户端节点上，只需要安装现代浏览器（即支持HTML、XHTML、CSS、ECMAScript及W3C DOM标准的浏览器）即可。具体部署图如图所示。

示意图

![icon](http://assets.processon.com/chart_image/5ae5be27e4b039625af793c0.png?_=1554259679134)

## 5. 架构设计

由于Web开发的特殊性，个人博客系统的用户端不需要进行开发，只需用户自行安装浏览器即可，故略过。服务器端模块视图如图6所示。服务器端各层的职责如表2所示。

<div style="text-align:center;"><strong>表2 服务器端各层的职责





|     层     | 职责                                             |
| :--------: | ------------------------------------------------ |
|  启动模块  | 负责启动系统，初始化网络通信机制和数据服务的连接 |
|   展示层   | 基于Web的个人博客系统的客户端用户界面            |
|  接口模块  | 负责客户端和服务器端的通信及数据传递             |
| 业务逻辑层 | 对用户界面的输入进行响应并执行业务处理逻辑       |
| 数据服务层 | 抽象出的数据操作接口                             |
|   数据层   | 负责数据的持久化和访问                           |

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表3所示。

<div style="text-align:center;"><strong>表3 层之间调用接口





| 接口 | 服务调用方         | 服务提供方         |
| :--: | ------------------ | ------------------ |
| API  | 服务器端展示层     | 服务器端接口模块   |
|      | 服务器端接口模块   | 服务器端业务逻辑层 |
|      | 服务器端业务逻辑层 | 服务器端数据服务层 |
|      | 服务器端数据服务层 | 服务器端数据层     |



借用酒店选择用例来说明层之间的调用，如图所示。每一层之间都是由上层依赖了一个接口（需接口），而下层实现这个接口（供接口）。HotelBLService 提供了 HotelUI 界面所需要的所有业务逻辑功能。HotelList 提供了对数据库的增、删、改、查等操作。这样的实现就大大降低了层与层之间的耦合。





### 5.2 用户界面层分解

​        根据需求，系统存在 个用户界面

用户界面跳转如下图所示。



<div style="text-align:center;"><strong>用户界面跳转



​    

用户界面类如下图所示。



<div style="text-align:center;"><strong>用户界面类





#### 5.2.1 展示层模块的职责

展示层模块的职责如下表所示。

| 模块 | 职责 |
| ---- | ---- |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |

<div style="text-align:center;"><strong>展示层模块的职责


​    

#### 5.2.2 展示层模块的接口规范

用户界面层模块的接口规范如下表所示。

| MainFrame | 语法         | init(args:String[]) |
| --------- | ------------ | ------------------- |
|           | **前置条件** | 无                  |
|           | **后置条件** | 显示Frame           |



<div style="text-align:center;"><strong>用户界面层的接口规范







​    

### 5.3 业务逻辑层分解  

业务逻辑层包括多个针对界面的业务逻辑处理对象。例如，   业务逻辑层的设计如下图所示。

#### 5.3.1 业务逻辑层分解职责

业务逻辑层的职责如下表所示

| 模块 | 职责 |
| ---- | ---- |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |
|      |      |

#### 5.3.2 业务逻辑层分解接口规范

<div style="text-align:center;"><strong>AccountService模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.registerAccount</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO registerAccount(UserVO userVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户发出注册请求</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">注册新账号</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.login</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public User login(UserForm userForm);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已注册</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">登录完成，进入主界面</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.getUserInfo</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public User getUserInfo(int id)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户存在</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountService.updateUserInfo</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public ResponseVO updateUserInfo(int id, String password, String username, String phonenumber);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户存在</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">accountMapper.createNewAccount</td>
  <td class="xl65">创建新账号</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">accountMapper.getAccountByName</td>
  <td class="xl65">根据用户名查询账户</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">accountMapper.getAccountById</td>
  <td class="xl65">根据id查询账户</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>


<div style="text-align:center;"><strong>AccountController模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountController.registerAccount</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO registerAccount(@RequestBody UserVO userVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户发出注册请求</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">注册新账号</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountController.login</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public ResponseVO login(@RequestBody UserForm userForm);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已注册</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">·
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">登录完成，进入主界面</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountController.getUserInfo</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO getUserInfo(@PathVariable int id)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户存在</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">AccountController.updateUserInfo</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public ResponseVO updateInfo(@RequestBody UserInfoVO userInfoVO,@PathVariable int id);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户存在</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>



<div style="text-align:center;"><strong>OrderService模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.addOrder</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO addOrder(OrderVO orderVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">添加新订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.getAllOrders</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public List<Order> getAllOrders();</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.getUserOrders</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public List<Order> getUserOrders(int userid)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderService.annulOrder</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public ResponseVO annulOrder(int orderid);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">orderMapper.addOrder</td>
  <td class="xl65">创建新订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">orderMapper.getAllOrders</td>
  <td class="xl65">查询用户所有订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">orderMapper.getUsergetOrderByIdOrders</td>
  <td class="xl65">根据id查询订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>


<div style="text-align:center;"><strong>OrderController模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderController.addOrder</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public int addOrder(Order order);;</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">添加新订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderController.getAllOrders</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">List<Order> getAllOrders();;</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderController.getUserOrders</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">List<Order> getUserOrders(@Param("userid") int userid)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">OrderController.annulOrder</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">int annulOrder(@Param("orderid") int orderid);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>
<div style="text-align:center;"><strong>HotelService模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelServiceImpl.addHotel</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public void addHotel(HotelVO hotelVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户有管理员权限</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">添加新酒店</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelServiceImpl.updateRoomInfo</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public updateRoomInfo(Integer hotelId, String roomType, Integer rooms);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户有相应酒店权限</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelServiceImpl.retrieveHotelDetails</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public HotelVO retrieveHotelDetails(Integer hotelId)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelServiceImpl.getHotelOrders</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public List<Order> getHotelOrders(Integer hotelId);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户具有相关酒店管理权限</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">roomVO.roomVO.setId(r.getId())</td>
  <td class="xl65">设置房间信息</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
    <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">roomVO.setCurNum(r.getCurNum())</td>
  <td class="xl65">设置房间数量</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">hotelMapper.selectAllHotel()</td>
  <td class="xl65">查询所有酒店</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">orderService.getAllOrders()</td>
  <td class="xl65">获取所有订单</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>


<div style="text-align:center;"><strong>HotelController模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelController.createHotel </td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO createHotel(@RequestBody HotelVO hotelVO) ;</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户具有管理权限</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">HotelController.addRoomInfo</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO addRoomInfo(@RequestBody HotelRoom hotelRoom)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户具有酒店管理权限</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>


<div style="text-align:center;"><strong>CouponService模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponServiceImpl.getMatchOrderCoupon</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">    public List<Coupon> getMatchOrderCoupon(OrderVO orderVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">用户已登录</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponServiceImpl.getHotelAllCoupon</td>
  <td class="xl65">语法</td>
  <td colspan="4" style="mso-ignore:colspan">public List<Coupon> getHotelAllCoupon(Integer hotelId);</td>
  <td></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponServiceImpl.addHotelTargetMoneyCoupon</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public CouponVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">coupon.setCouponName(couponVO.getName())</td>
  <td class="xl65">设置优惠名称</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">couponMapper.selectByHotelId(hotelId)</td>
  <td class="xl65">根据酒店id查询优惠</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>


<div style="text-align:center;"><strong>CouponController模块的接口规范


<table border="0" cellpadding="0" cellspacing="0" width="639">
 <colgroup><col width="127" span="2" style="mso-width-source:userset;mso-width-alt:4522;
 width:95pt">
 <col width="129" style="mso-width-source:userset;mso-width-alt:4579;width:97pt">
 <col width="64" span="4" style="width:48pt">
 </colgroup><tbody><tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" width="383" style="height:13.8pt;width:287pt">提供的服务（供接口）</td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponController.addHotelTargetMoneyCoupon </td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">    public ResponseVO addHotelTargetMoneyCoupon(@RequestBody HotelTargetMoneyCouponVO hotelTargetMoneyCouponVO);</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td rowspan="3" height="54" class="xl65" style="height:41.4pt">CouponController.getOrderMatchCoupons</td>
  <td class="xl65">语法</td>
  <td colspan="3" style="mso-ignore:colspan">public ResponseVO getOrderMatchCoupons(@RequestParam Integer userId,
                                           @RequestParam Integer hotelId,
                                           @RequestParam Double orderPrice,
                                           @RequestParam Integer roomNum,
                                           @RequestParam String checkIn,
                                           @RequestParam String checkOut)</td>
  <td colspan="2" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">前置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td height="18" class="xl65" style="height:13.8pt">后置条件</td>
  <td class="xl65">无</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="3" height="18" class="xl66" style="height:13.8pt">需要的接口（需接口）</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">vo.ResponseVO</span></td>
  <td class="xl65">检查调用是否成功</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <tr height="18" style="height:13.8pt">
  <td colspan="2" height="18" class="xl65" style="height:13.8pt">
  <span lang="EN-US" style="box-sizing: border-box">requestOrderVO.setUserId(userId)</span></td>
  <td class="xl65">设置优惠订单信息</td>
  <td colspan="4" style="mso-ignore:colspan"></td>
 </tr>
 <!--[if supportMisalignedColumns]-->
 <tr height="0" style="display:none">
  <td width="127" style="width:95pt"></td>
  <td width="127" style="width:95pt"></td>
  <td width="129" style="width:97pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
  <td width="64" style="width:48pt"></td>
 </tr>
 <!--[endif]-->
</tbody></table>



### 5.4 数据层分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。模块设计和各个模块所提供的服务分别如图11所示。

#### 5.4.1 职责

数据层模块的职责如下表22所示。

<div style="text-align:center;"><strong>表22 数据层模块的职责



| 模块                | 职责                                                         |
| ------------------- | ------------------------------------------------------------ |
| UserRepository      | 基于 sql 数据库的持久化数据库的接口，提供用户信息相关的增改查服务 |
| HotelRepository     | 基于 sql 数据库的持久化数据库的接口，提供酒店信息相关的增删改查服务 |
| HotelRoomRepository | 基于 sql 数据库的持久化数据库的接口，提供酒店客房相关的增删改查服务 |
| CouponRepository    | 基于 sql 数据库的持久化数据库的接口，提供酒店促销策略的增删改查服务 |
| OrderRepository     | 基于 sql 数据库的持久化数据库的接口，提供订单相关的增删改查服务 |

#### 5.4.2 接口规范

数据层UserRepository 模块、HotelRepository 模块、HotelRoomRepository模块、CouponRepository模块、OrderRepository模块的接口规范分别如表23、24、25、26、27、28所示。

<div style="text-align:center;"><strong>表23 UserRepository模块的接口规范



| 提供的接口 |      |      |
| ---------- | ---- | ---- |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |

<div style="text-align:center;"><strong>表24 HotelRepository模块的接口规范



| 提供的接口 |      |      |
| ---------- | ---- | ---- |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |
|            |      |      |

<div style="text-align:center;"><strong>表25 HotelRoomRepository模块的接口规范



| 提供的接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| HotelRoomRepository.save               | 语法<br />前置条件<br/>后置条件  | public int save(HotelRoom hotelRoom)<br />无<br />新增、更新一间客房 |
| HotelRoomRepository.findByHotelId      | 语法<br />前置条件<br />后置条件 | public List findByHotelId(Integer hotelId)<br />无<br />无   |
| HotelRoomRepository.findRoomCurNum     | 语法<br />前置条件<br />后置条件 | public int findRoomCurNum(Integer hotelId,String roomtype)<br />无<br />无 |
| HotelRoomRepository.deleteById         | 语法<br />前置条件<br />后置条件 | public int deleteById(Integer id)<br />无<br />删除一间客房  |
| 需要的接口                             |                                  |                                                              |
| 服务名                                 | 服务                             |                                                              |
| data.databaseutility.ConnectionFactory | 连接数据库                       |                                                              |
| dao.HotelRoom                          | 表示客房实体                     |                                                              |

<div style="text-align:center;"><strong>表26 CouponRepository模块的接口规范



| 提供的接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| CouponRepository.save                  | 语法<br />前置条件<br />后置条件 | public int save(Coupon coupon)<br />无<br />新增、更新一条优惠方案 |
| CouponRepository.findByHotelId         | 语法<br />前置条件<br />后置条件 | public List findByHotelIdr(Integer hotelId)<br />无<br />无  |
| 需要的接口                             |                                  |                                                              |
| 服务名                                 | 服务                             |                                                              |
| data.databaseutility.ConnectionFactory | 连接数据库                       |                                                              |
| dao.Coupon                             | 表示优惠卷实体                   |                                                              |

<div style="text-align:center;"><strong>表27 OrderRepository模块的接口规范


| 提供的接口                             |                                  |                                                              |
| -------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| OrderRepository.save                   | 语法<br />前置条件<br />后置条件 | public int save(Order order)<br />无<br />新增、更新一个订单 |
| OrderRepository.findAllOrders          | 语法<br />前置条件<br />后置条件 | public List findAllOrders()<br />无<br />无                  |
| OrderRepository.findByUserId           | 语法<br />前置条件<br />后置条件 | public List findByUserId(int userid)<br />无<br />无         |
| OrderRepository.findByOrderId          | 语法<br />前置条件<br />后置条件 | public Order findByOrderId(int orderid)<br />无<br />无      |
| 需要的接口                             |                                  |                                                              |
| 服务名                                 | 服务                             |                                                              |
| data.databaseutility.ConnectionFactory | 连接数据库                       |                                                              |
| dao.Order                              | 表示会员实体                     |                                                              |



### 6. 信息视角

#### 6.1 数据持久化对象

在此对系统的实体类做简单的介绍：

- User：用户id、邮箱、密码、用户名、电话、信用值、用户类型
- Hotel：酒店id、酒店名称、地址、商圈、星级、评分、酒店描述、联系电话
- HotelRoom：客房id、客房类型、酒店id、剩余可预定房间数、此类型房间总数
- Coupon：优惠劵id、优惠劵描述、是否为网站推出的优惠劵、类型、名称、使用门槛、折扣、优惠金额、可用时间、失效时间、优惠劵状态
- Order：订单id、预定者id、酒店id、酒店名称、入住时间、退房时间、客房类型、客房数量、入住人数、是否同行儿童、订单生成时间、客房价格、客户姓名、客户联系方式、订单状态

#### 6.2 数据库表

数据库中包含UserRepository 表、HotelRepository 表、HotelRoomRepository表、CouponRepository表、OrderRepository表。